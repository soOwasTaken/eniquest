<template>
  <div class="terminal">
    <div class="header">
      <div class="banner">
        <pre style="opacity: 0.35; line-height: 0.95; color: #e8aabe; font-weight: bold">
          __...----...__
    .  .      .-' -=;::;::`;:::`-.       .  .     .     .    .     .      .      .       .       .      .      .        .          .       .        .      .       .        .     .       .      .      .
          .-'"; `-;:"";`-;   ,;;'`-.
  . . . .''";;:     ,..   `.;;. .';;'.    . .              .          .      .      .  
       /  ,;;::,     `--'  ,.;: ::  .;:\
  .    ..- .; ;:,;,,.,   ,  ;;: ::;;:..;:. .    .          .         .        .        .        .      .        .       .      .        .     .         .       .    .        .       .       .      .      .
  .   ;   ;    .;::,    ;:.;:::::::::;., ;  .            .           .        .
     |;. :      ;:;       `-;:::::-'""  |       .  .          .         .   .    .     .    .  . 
     | ;,'  ,;::     ;.     `-;::  `;:::| 
     ;`-;.   ,;:  ,;; `.  ."";,     ;;, ;       .       .     .    .     .    .     .    .     .       .      .    .  .       .     .         .     .     .    .     .      .      .       .      .      .
     '. ."".,        "".    ,;:;  '.,;::. . .`.                              .'        .         .          .         .         .         .        .        .      .           .       .         .       .     
  .  . .`.                          .'   .        .      .      .      .      .   .     .        .     .
  .   .  .`-.                   .-'
    .   . .   ""--...______...--""
   .  .  .  .    .      .      .      .      .      .      .      .      .      .      .           .          .       .        .      .     .        .       .      .     .     .       .      .      .
  .                               .       .       .       .       .       .            .        .         .        .       .      .
     .        .        .        .        .        .        .        .        .
   .    .         .         .        _......____._        .         .   .             .           .         .           .       .       .           .         .     .       .      .       .      .      .
     .          .          . ..--'"" .           """"""---...          .
         .       .     _...--""        ................       `-.              .        .       .        .       .      .    .
   .     .   .       .-'        ...:'::::;:::%:.::::::_;;:...     `-.
          .     .-'       ..::::'''''   _...---'"""":::+;_::.      `.      .         .        .         .         .        .       .       . .       .        .     .       .       .      .      .
    .        .' .    ..::::'      _.-""               :::)::.       `.
         .  .      ..;:::'     _.-'         .             f::'::    o  _  .          .        .      .       .       .     .      .     .   .    .        .         .          .        .       .
    .      /     .:::%'  .  .-"                        .-.  ::;;:.   /" "x
    .   .'  ""::.::'    .-"     _.--'"""-.           (   )  ::.::  |_.-' |
       .'    ::;:'    .'     .-" .d@@b.   \    .    . `-'   ::%::   \_ _/    .       .       .       .      .        .        .     .      .         .           .       .      .    .
      .'    :,::'    /   . _'    8@@@@8   j      .-'       :::::      " o
      | .  :.%:' .  j     (_)    `@@@P'  .'   .-"         ::.::    .  f
      |    ::::     (        -..____...-'  .-"          .::::'       / .       .       .    .        .        .       .     .     .        .         .        .     . .        .       .    .    .
  .   |    `:`::    `.                ..--'        .  .::'::   .    /
      j     `:::::    `-._____...---""             .::%:::'       .'  .          .           .         .           .         .         .          .          .         .    .     .      .    .
       \      ::.:%..             .       .    ...:,::::'       .'
   .    \       `:::`:..                ....::::.::::'       .-'          . .       .       .        .      .       .        .        .        .      .     .     .      .     .      .      . .
         \    .   ``:::%::`::.......:::::%::.::::''       .-'
        . `.        . ``::::::%::::.::;;:::::'''      _.-'          .
    .       `-..     .    .   ````'''''         . _.-'     .          . .         .       .       .   .       .        .      .     .      .      .     .         .       .   .    .
  
           .    ""--...____    .   ______......--' .         .         .
    .        .        .    """"""""     .        .        .        .        . .         .       .       .   .       .        .      .     .      .      .     .         .       .   .    .
  
   .       .       .       .       .       .       .       .       .
       .      .      .      .      .      .      .      .      .      .      . .      .         .       .       .   .       .        .      .     .      .      .     .         .       .   .    .</pre
        >
        <pre style="opacity: 0.35; line-height: 0.95; color: #e8aabe; font-weight: bold">
  
  ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░░▒▓████████▓▒░      ░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░        ░▒▓██████▓▒░░▒▓███████▓▒░ ░▒▓███████▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓███████▓▒░       ░▒▓█▓▒░▒▓███████▓▒░       ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░      ░▒▓███████▓▒░░▒▓███████▓▒░ ░▒▓██████▓▒░░▒▓██████████████▓▒░░▒▓███████▓▒░▒▓████████▓▒░ 
     ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
     ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
     ░▒▓█▓▒░    ░▒▓██████▓▒░░▒▓███████▓▒░░▒▓██████▓▒░         ░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░       ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓██████▓▒░ ░▒▓███████▓▒░       ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓████████▓▒░▒▓██████▓▒░        ░▒▓███████▓▒░░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░  ░▒▓█▓▒░     
     ░▒▓█▓▒░      ░▒▓█▓▒░   ░▒▓█▓▒░      ░▒▓█▓▒░                ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        ░▒▓█▓▒░     
     ░▒▓█▓▒░      ░▒▓█▓▒░   ░▒▓█▓▒░      ░▒▓█▓▒░                ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        ░▒▓█▓▒░     
     ░▒▓█▓▒░      ░▒▓█▓▒░   ░▒▓█▓▒░      ░▒▓████████▓▒░         ░▒▓█▓▒░    ░▒▓██████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░ ░▒▓█████████████▓▒░░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░      ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        ░▒▓█▓▒░     
                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                  
  </pre
        >
      </div>
      <br />
      <pre
        id="second-pre"
        style="color: #ffe361; font-size: 6px; opacity: 0.4; font-weight: bold; line-height: 1"
      >
                     .::.              ___                          _   _        _              __                         _   _          _      _                                                       _              _                           _ _   _            _          _ _     
                  .:'  .:             | __|  ___   _ _     __ _    | | (_)  ___ | |_     ___   / _|    __ _  __ __  __ _  (_) | |  __ _  | |__  | |  ___     __   ___   _ __    _ __    __ _   _ _    __| |  ___       | |_   _  _   _ __   ___    ( | ) | |_    ___  | |  _ __  ( | )    
        ,MMM8&&&.:'   .:              | _|  / _ \ | '_|   / _` |   | | | | (_-< |  _|   / _ \ |  _|   / _` | \ V / / _` | | | | | / _` | | '_ \ | | / -_)   / _| / _ \ | '  \  | '  \  / _` | | ' \  / _` | (_-<  _    |  _| | || | | '_ \ / -_)    V V  | ' \  / -_) | | | '_ \  V V   _ 
       MMMMM88&&&&  .:'               |_|   \___/ |_|     \__,_|   |_| |_| /__/  \__|   \___/ |_|     \__,_|  \_/  \__,_| |_| |_| \__,_| |_.__/ |_| \___|   \__| \___/ |_|_|_| |_|_|_| \__,_| |_||_| \__,_| /__/ ( )    \__|  \_, | | .__/ \___|         |_||_| \___| |_| | .__/       (_)
      MMMMM88&&&&&&:'                                                                                                                                                                                            |/            |__/ |_|                                   |_|             
     MMMMM88&&&&&&
   .:MMMMM88&&&&&&
 .:'  MMMMM88&&&&
.:'   .:'MMM8&&&'
:'  .:'
'::' 


</pre
      >
    </div>
    <div class="output" ref="output">
      <div v-for="line in outputLines" :key="line" v-html="line"></div>
    </div>
    <div class="input-line">
      <span class="prompt">spaceship@traveler:~$</span>
      <input
        class="user-input"
        v-model="command"
        @keyup.tab="handleTab"
        @keyup.enter="executeCommand"
        @input="updateCaretPosition"
        ref="input"
      />
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      command: '',
      currentDirectory: '/',
      fileSystem: {
        '/': {
          'thoughts.txt': `In the realm of free expression we stand tall,<br>
Voices echoing, one and all.<br>
From whispers soft to words that roar,<br>
Freedom's symphony, forevermore.<br>

Ideas clash, in the marketplace,<br>
Debates flourish, with every embrace.<br>
In the garden of thought, where minds entwine,<br>
Liberty's blossom, forever divine.<br>

Through the valleys of dissent, we stride,<br>
Champions of truth, side by side.<br>
For in the realm where speech is free,<br>
We forge our path to destiny.<br>`,
          'silenced_voices.txt': `In the shadows cast by the censor's hand,<br>
Voices silenced, across the land.<br>
Where once there thrived a vibrant song,<br>
Now echoes fade, silenced and gone.<br>

Ideas stifled, beneath the weight,<br>
Of arbitrary rules, decreeing fate.<br>
In the realm where thoughts are bound,<br>
Creativity withers, without a sound.<br>

But even in the darkness, seeds still sow,<br>
Resistance blooms, refusing to bow low.<br>
For where there's silence, there's also light,<br>
Breaking through, with all its might.<br>

Let us cherish free speech's might,<br>
And guard it fiercely, day and night.<br>
For in its absence, we're but slaves,<br>
To the whims of those who rule as knaves.<br>`,
          'log.txt': `01001001 00100000 01100100 01101001 01110011 01100001 01110000 01110000 01110010 01101111 01110110 01100101 00100000 01101111 01100110 00100000 01110111 01101000 01100001 01110100 00100000 01111001 01101111 01110101 00100000 01110011 01100001 01111001 00101100 00100000 01100010 01110101 01110100 00100000 01001001 00100000 01110111 01101001 01101100 01101100 00100000 01100100 01100101 01100110 01100101 01101110 01100100 00100000 01110100 01101111 00100000 01110100 01101000 01100101 00100000 01100100 01100101 01100001 01110100 01101000 00100000 01111001 01101111 01110101 01110010 00100000 01110010 01101001 01100111 01101000 01110100 00100000 01110100 01101111 00100000 01110011 01100001 01111001 00100000 01101001 01110100 00101110 00100000 00101101 00100000 01010110 01101111 01101100 01110100 01100001 01101001 01110010 01100101`,
          'notes.txt': `01001001 01100110 00100000 01101100 01101001 01100010 01100101 01110010 01110100 01111001 00100000 01101101 01100101 01100001 01101110 01110011 00100000 01100001 01101110 01111001 01110100 01101000 01101001 01101110 01100111 00100000 01100001 01110100 00100000 01100001 01101100 01101100 00101100 00100000 01101001 01110100 00100000 01101101 01100101 01100001 01101110 01110011 00100000 01110100 01101000 01100101 00100000 01110010 01101001 01100111 01101000 01110100 00100000 01110100 01101111 00100000 01110100 01100101 01101100 01101100 00100000 01110000 01100101 01101111 01110000 01101100 01100101 00100000 01110111 01101000 01100001 01110100 00100000 01110100 01101000 01100101 01111001 00100000 01100100 01101111 00100000 01101110 01101111 01110100 00100000 01110111 01100001 01101110 01110100 00100000 01110100 01101111 00100000 01101000 01100101 01100001 01110010 00101110 00100000 00101101 00100000 01000111 01100101 01101111 01110010 01100111 01100101 00100000 01001111 01110010 01110111 01100101 01101100 01101100`,
          'doc.txt': `01000110 01110010 01100101 01100101 00100000 01110011 01110000 01100101 01100101 01100011 01101000 00100000 01101001 01110011 00100000 01110100 01101000 01100101 00100000 01110111 01101000 01101111 01101100 01100101 00100000 01110100 01101000 01101001 01101110 01100111 00101100 00100000 01110100 01101000 01100101 00100000 01110111 01101000 01101111 01101100 01100101 00100000 01100010 01100001 01101100 01101100 00100000 01100111 01100001 01101101 01100101 00101110 00100000 01000110 01110010 01100101 01100101 00100000 01110011 01110000 01100101 01100101 01100011 01101000 00100000 01101001 01110011 00100000 01101100 01101001 01100110 01100101 00100000 01101001 01110100 01110011 01100101 01101100 01100110 00101110 00100000 00101101 00100000 01010011 01100001 01101100 01101101 01100001 01101110 00100000 01010010 01110101 01110011 01101000 01100100 01101001 01100101`,
          'data.txt': `01000011 01100101 01101110 01110011 01101111 01110010 01110011 01101000 01101001 01110000 00100000 01110010 01100101 01100110 01101100 01100101 01100011 01110100 01110011 00100000 01110011 01101111 01100011 01101001 01100101 01110100 01111001 00100111 01110011 00100000 01101100 01100001 01100011 01101011 00100000 01101111 01100110 00100000 01100011 01101111 01101110 01100110 01101001 01100100 01100101 01101110 01100011 01100101 00100000 01101001 01101110 00100000 01101001 01110100 01110011 01100101 01101100 01100110 00101110 00100000 00101101 00100000 01010000 01101111 01110100 01110100 01100101 01110010 00100000 01010011 01110100 01100101 01110111 01100001 01110010 01110100`,
          'debug.txt': `01000011 01100101 01101110 01110011 01101111 01110010 01110011 01101000 01101001 01110000 00100000 01101001 01110011 00100000 01110100 01100101 01101100 01101100 01101001 01101110 01100111 00100000 01100001 00100000 01101101 01100001 01101110 00100000 01101000 01100101 00100000 01100011 01100001 01101110 00100111 01110100 00100000 01101000 01100001 01110110 01100101 00100000 01100001 00100000 01110011 01110100 01100101 01100001 01101011 00100000 01101010 01110101 01110011 01110100 00100000 01100010 01100101 01100011 01100001 01110101 01110011 01100101 00100000 01100001 00100000 01100010 01100001 01100010 01111001 00100000 01100011 01100001 01101110 00100111 01110100 00100000 01100011 01101000 01100101 01110111 00100000 01101001 01110100 00101110 00100000 00101101 00100000 01001101 01100001 01110010 01101011 00100000 01010100 01110111 01100001 01101001 01101110`,

          'config.txt': `01000101 01111000 01110000 01101100 01101111 01110010 01100101 00100000 01100111 01100001 01101100 01100001 01111000 01111001 01110001 01110101 01100101 01110011 01110100 00101101 00110001 01100011 00111000 00110010 00110100 01100011 00110100 00110100 00110000 00110101 01100100 01100110 00101110 01101000 01100101 01110010 01101111 01101011 01110101 01100001 01110000 01110000 00101110 01100011 01101111 01101101 00101100 00100000 01110100 01101000 01100101 00100000 01110101 01101110 01101001 01110110 01100101 01110010 01110011 01100101 00100000 01101001 01110011 00100000 01111001 01101111 01110101 01110010 01110011 00101110`,
          'draft.txt': `01000110 01110010 01100101 01100101 01100100 01101111 01101101 00100000 01101111 01100110 00100000 01110011 01110000 01100101 01100101 01100011 01101000 00100000 01101001 01110011 00100000 01100001 00100000 01100011 01101111 01101110 01100011 01100101 01110000 01110100 00100000 01110100 01101000 01100001 01110100 00100000 01110011 01100101 01100101 01101101 01110011 00100000 01110100 01101111 00100000 01100010 01100101 00100000 01100110 01100001 01100100 01101001 01101110 01100111 00100000 01101111 01101110 00100000 01000101 01100001 01110010 01110100 01101000 00101110 00100000 01010000 01100101 01110010 01101000 01100001 01110000 01110011 00100000 01101001 01110100 00100111 01110011 00100000 01110100 01101001 01101101 01100101 00100000 01110100 01101111 00100000 01100011 01101111 01101110 01110011 01101001 01100100 01100101 01110010 00100000 01100101 01111000 01110000 01101100 01101111 01110010 01101001 01101110 01100111 00100000 01101111 01110100 01101000 01100101 01110010 00100000 01110000 01101100 01100001 01101110 01100101 01110100 01110011 00100000 01110100 01101111 00100000 01100101 01101110 01110011 01110101 01110010 01100101 00100000 01110100 01101000 01100001 01110100 00100000 01110111 01100101 00100000 01100011 01100001 01101110 00100000 01101101 01100001 01101001 01101110 01110100 01100001 01101001 01101110 00100000 01110100 01101000 01100101 00100000 01100110 01110010 01100101 01100101 01100100 01101111 01101101 00100000 01110100 01101111 00100000 01100101 01111000 01110000 01110010 01100101 01110011 01110011 00100000 01101111 01110101 01110010 00100000 01110100 01101000 01101111 01110101 01100111 01101000 01110100 01110011 00101110 00100000 01001110 01100001 01101101 01100101 00100000 01100001 01101100 01101100 00100000 01110100 01101000 01100101 00100000 01110000 01101100 01100001 01101110 01100101 01110100 01110011 00100000 01101001 01101110 00100000 01110100 01101000 01101001 01110011 00100000 01110000 01100001 01110010 01100001 01101100 01101100 01100101 01101100 00100000 01110101 01101110 01101001 01110110 01100101 01110010 01110011 01100101 00101110`
        }
      },
      commands: {
        help: [
          {
            command: 'guess <your answer to the game>',
            description: 'Guess what the answer to the game is'
          },
          { command: 'clear', description: 'Clear the terminal screen' },
          { command: 'banner', description: "Display the terminal's header" },
          { command: 'ls', description: 'List all files' },
          { command: 'cat <filename>', description: 'Display content of a file' },
          { command: 'echo <text> > <filename>', description: 'Overwrite text to a file' },
          { command: 'echo <text> >> <filename>', description: 'Append text to a file' },
          { command: 'cp <source_file> <destination>', description: 'Copy a file into another' },
          { command: 'rm <filename>', description: 'Delete a file' },
          { command: 'help', description: 'Show all available commands' }
        ],
        clear: ''
      },
      outputLines: []
    }
  },
  methods: {
    executeCommand() {
      const [commandName, ...args] = this.command.trim().split(' ')
      console.log('User input:', this.command)
      console.log(args, args.length, args[args.length - 2])

      // Handle tab completion for cat command
      // if (commandName === 'cat') {
      //   if (args.length === 1) {
      //     const [autoCompletedArg] = this.autoCompleteFilename(args[0])
      //     if (autoCompletedArg) {
      //       if (this.confirmationNeeded) {
      //         this.command = `cat ${this.partialFilename}`
      //         this.confirmationNeeded = false
      //         this.partialFilename = ''
      //         return
      //       } else {
      //         this.partialFilename = autoCompletedArg
      //         this.confirmationNeeded = true
      //         this.printOutput(`Press Enter again to open ${autoCompletedArg}`)
      //         return
      //       }
      //     } else {
      //       if (this.confirmationNeeded) {
      //         this.printOutput(`No such file or directory: ${args[0]}`)
      //         this.confirmationNeeded = false
      //         this.partialFilename = ''
      //         return
      //       }
      //     }
      //   }
      // }

      switch (commandName) {
        case 'help':
          const helpMessage = this.commands.help
            .map(
              (cmd) =>
                `<span style="display: inline-block; width: 550px; animation: fadeIn .5s;"><b style="font-weight: bold; color: #5784BA; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);;">${cmd.command
                  .replace(/<\s*([^>]*)\s*>/g, '<$1>')
                  .replace(/</g, '&lt;')
                  .replace(
                    />/g,
                    '&gt;'
                  )}</b>:</span> <span style="font-weight: bold; opacity: .6">${cmd.description}</span>`
            )
            .join('<br>')
          this.printOutput(helpMessage)
          break

        case 'clear':
          this.clearOutput()
          break
        case 'ls':
          this.printOutput(this.listDirectory(args[0]))
          break
        case 'cat':
          if (args.length === 1) {
            this.printOutput(this.readFile(args[0]))
          } else {
            this.printOutput('Usage: cat <filename>')
          }
          break
        case 'echo':
          this.echoCommand(args)
          break

        case 'cp':
          if (args.length === 2) {
            this.copyFile(args[0], args[1])
          } else {
            this.printOutput('Usage: cp <source_file> <destination>')
          }
          break
        case 'rm':
          if (args.length === 1) {
            this.removeFile(args[0])
          } else {
            this.printOutput('Usage: rm <filename>')
          }
          break
        case 'banner':
          const banner = document.querySelector('.banner').innerHTML
          this.printOutput(`<pre style="line-height: 0.95; font-size: 0.3em;
  margin-bottom: 24px; color: #e8aabe; font-weight: bold">${banner}</pre>`)
          break
        default:
          this.printOutput(`${commandName}: command not found`)
      }

      this.command = ''
    },
    printOutput(output) {
      const prompt =
        this.currentDirectory === '/'
          ? 'spaceship@traveler:~$'
          : `spaceship@traveler:~$:${this.currentDirectory}$`

      let outputLine = `<p><span class="prompt" style="color: green;">${prompt}</span> <span class="command">${this.command}</span></p>`

      // Check if the command is a guess for the names
      if (this.command.startsWith('guess ')) {
        // Extract the guessed names
        const guessedNames = this.command.substring(6).trim()

        // Send the guessed names to the server for validation
        fetch('/checkOrder', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ game: 'game1', order: guessedNames }) // Set the game parameter based on the game being played
        })
          .then((response) => response.json())
          .then((data) => {
            outputLine += `<p>${data.feedback}</p>`
            this.outputLines.push(outputLine)
            this.$nextTick(() => {
              const terminal = document.querySelector('.terminal')
              terminal.scrollTop = terminal.scrollHeight
            })

            // Check if the user has won
            if (data.feedback === 'Correct!') {
              alert("Congratulations! You've guessed all the names correctly!")
            }
          })
          .catch((error) => {
            console.error('Error:', error)
          })
      } else {
        // Handle other commands normally
        outputLine += `<p>${output}</p>`
        this.outputLines.push(outputLine)
        this.$nextTick(() => {
          const terminal = document.querySelector('.terminal')
          terminal.scrollTop = terminal.scrollHeight
        })
      }
    },
    clearOutput() {
      this.outputLines = []
    },
    listDirectory(directory) {
      directory = directory || this.currentDirectory
      const currentDirContent = this.fileSystem[directory]
      if (!currentDirContent) {
        return `Error: Cannot list contents of ${directory}. It may not exist or is not a directory.`
      }

      const items = Object.keys(currentDirContent)
      if (!Array.isArray(items)) {
        return 'Error: Directory contents could not be retrieved.'
      }

      let output = ''
      for (const item of items) {
        if (typeof currentDirContent[item] === 'object') {
          output += `<span style="color: blue;">${item}</span><br>`
        } else {
          output += `${item}&nbsp;&nbsp;&nbsp;`
        }
      }

      return output
    },

    copyFile(source, destination) {
      const files = this.fileSystem[this.currentDirectory]
      if (files[source] !== undefined) {
        if (files[destination] === undefined) {
          const sourceContent = this.readFile(source)
          this.fileSystem[this.currentDirectory][destination] = sourceContent
          this.printOutput(`File '${source}' copied to '${destination}'.`)
        } else {
          this.printOutput(`File '${destination}' already exists.`)
        }
      } else {
        this.printOutput(`File '${source}' does not exist.`)
      }
    },
    readFile(filename) {
      const content = this.fileSystem[this.currentDirectory][filename]
      if (typeof content === 'object') {
        return `${filename}: Is a directory`
      } else if (content !== undefined) {
        return content
      } else {
        return `${filename}: No such file or directory`
      }
    },
    removeFile(filename) {
      const files = this.fileSystem[this.currentDirectory]
      if (files[filename] !== undefined) {
        delete files[filename]
        this.printOutput(`File '${filename}' removed.`)
      } else {
        this.printOutput(`File '${filename}' does not exist.`)
      }
    },

    echoCommand(args) {
      if (args.length >= 3 && (args[args.length - 2] === '>' || args[args.length - 2] === '>>')) {
        const content = args.slice(0, -2).join(' ').replace(/^"|"$/g, '')
        const filename = args[args.length - 1]
        if (args[args.length - 2] === '>>') {
          this.fileSystem[this.currentDirectory][filename] += ' ' + content
        } else {
          this.fileSystem[this.currentDirectory][filename] = content
        }
        this.printOutput('')
      } else {
        this.printOutput('Usage: echo "content" > filename or echo "content" >> filename')
        console.log(args, args[args.length - 2])
      }
    },

    autoCompleteFilename(input) {
      const currentDirContent = this.fileSystem[this.currentDirectory]
      if (!currentDirContent) return []

      return Object.keys(currentDirContent).filter((filename) => filename.startsWith(input))
    }
  }
}
</script>

<style>
.terminal {
  font-size: 20px;
  font-family: monospace;
  background-color: #11151d;
  color: #fff;
  padding: 20px;
  border-radius: 5px;
  max-width: 100%;
  margin: auto;
  height: 100vh;
  overflow-y: auto;
}

.header {
  font-size: 0.3em;
  margin-bottom: 24px;
}

.output {
  margin-bottom: 10px;
  /* animation: typing 2s steps(30, end);
  white-space: pre-wrap; */
}

.input-line {
  display: flex;
}

.user-input {
  position: relative;
  display: inline-block;
  background-color: #11151d;
  color: #fff;
  border: none;
  font-size: 20px;
  caret-color: rgb(213, 220, 76);
  width: 100vw;
}
.user-input-wrapper {
  position: relative;
  display: inline-block;
}

.custom-caret {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 2px;
  background-color: white;
  pointer-events: none;
}

@-webkit-keyframes blink {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes blink {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.user-input:focus {
  border: none !important;
  border-color: #000 !important;
  outline: none;
}

.prompt {
  font-weight: bold;
  margin-right: 5px;
  color: green;
  animation: typing 1.5s steps(20, end);
}
.output {
  animation: typing 3s ease-in-out;
  /* white-space: pre-wrap; */
}
/* #second-pre {
  animation: typing 0.3s steps(30, end);
  white-space: pre-wrap;
} */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes typing {
  0% {
    width: 0;
  }
  100% {
    width: 100%;
  }
}
</style>
